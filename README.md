# Лабораторная работа №5  
## **«Отладка кодовой базы с использованием средств отладки»**

> **На основе проекта ЛР №4 «Библиотека»**  
> Цель: найти и исправить 5 типовых ошибок с помощью отладчика

---

### Цель работы
- Закрепить навыки работы с отладчиком (точки останова, пошаговое выполнение, анализ стека и переменных).  
- Научиться выявлять и устранять типовые логические и runtime-ошибки.  
- Сформировать методику поиска, анализа и исправления ошибок.  
- Подготовить отчёт с детализацией каждой ошибки.

---

### Структура проекта

```
lab5_buggy_library/
├── models/
│   ├── init.py
│   ├── book.py          # Book, EBook, Audiobook (без ошибок)
│   └── library.py       # Library (без ошибок)
├── collections/
│   ├── init.py
│   ├── book_collection.py   # ← содержит баги №1 и №3
│   └── index_dict.py        # ← содержит баг №2
├── simulation.py        # ← содержит баги №4 и №5
├── main_buggy.py        # Два последовательных запуска симуляции
├── report_lab5.md       # Отчёт по отладке
└── README.md            
```


---

### Внесённые ошибки (всего 5)

| № | Тип ошибки | Место | Описание |
|---|------------|-------|----------|
| 1 | Off-by-one | `book_collection.py` → `remove()` | `pop(i + 1)` → `IndexError` |
| 2 | Изменение коллекции во время итерации | `index_dict.py` → `_remove_from_index()` | `RuntimeError` |
| 3 | Изменяемое значение по умолчанию | `book_collection.py` → `__init__()` | Все экземпляры делят один список |
| 4 | `is` вместо `in` | `simulation.py` → `"обновить_индекс"` | Всегда `False` |
| 5 | Глобальный флаг | `simulation.py` → `index_rebuilt` | Состояние не сбрасывается |

---

### Запуск (для воспроизведения ошибок)

```bash
cd Laboratory_work_5
python main_buggy.py
```

### Подробный отчёт

См. файл: report_lab5.md

В нём:

    Анализ каждой ошибки  
    Скриншоты стека и переменных (в описании)  
    Причины и исправления  
    Доказательства устранения